{"version":3,"sources":["../src/js/Drift.js"],"names":["Drift","triggerEl","options","VERSION","destroy","bind","TypeError","namespace","showWhitespaceAtEdges","containInline","inlineOffsetX","inlineOffsetY","inlineContainer","document","body","sourceAttribute","zoomFactor","paneContainer","undefined","inlinePane","handleTouch","onShow","onHide","injectBaseStyles","hoverDelay","touchDelay","hoverBoundingBox","touchBoundingBox","boundingBoxContainer","settings","_buildZoomPane","_buildTrigger","zoomPane","container","inline","trigger","el","imageURL","_setImageURL","enabled","_hide","_unbindEvents","isShowing","zf","boundingBox","Object","defineProperty","prototype","get","set","value","setZoomImageURL","disable","enable"],"mappings":"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","sourcesContent":["import { isDOMElement } from \"./util/dom\";\nimport injectBaseStylesheet from \"./injectBaseStylesheet\";\n\nimport Trigger from \"./Trigger\";\nimport ZoomPane from \"./ZoomPane\";\n\nexport default class Drift {\n  constructor(triggerEl, options = {}) {\n    this.VERSION = \"1.4.0\";\n    this.triggerEl = triggerEl;\n\n    this.destroy = this.destroy.bind(this);\n\n    if (!isDOMElement(this.triggerEl)) {\n      throw new TypeError(\"`new Drift` requires a DOM element as its first argument.\");\n    }\n\n    // Prefix for generated element class names (e.g. `my-ns` will\n    // result in classes such as `my-ns-pane`. Default `drift-`\n    // prefixed classes will always be added as well.\n    const namespace = options[\"namespace\"] || null;\n    // Whether the ZoomPane should show whitespace when near the edges.\n    const showWhitespaceAtEdges = options[\"showWhitespaceAtEdges\"] || false;\n    // Whether the inline ZoomPane should stay inside\n    // the bounds of its image.\n    const containInline = options[\"containInline\"] || false;\n    // How much to offset the ZoomPane from the\n    // interaction point when inline.\n    const inlineOffsetX = options[\"inlineOffsetX\"] || 0;\n    const inlineOffsetY = options[\"inlineOffsetY\"] || 0;\n    // A DOM element to append the inline ZoomPane to\n    const inlineContainer = options[\"inlineContainer\"] || document.body;\n    // Which trigger attribute to pull the ZoomPane image source from.\n    const sourceAttribute = options[\"sourceAttribute\"] || \"data-zoom\";\n    // How much to magnify the trigger by in the ZoomPane.\n    // (e.g., `zoomFactor: 3` will result in a 900 px wide ZoomPane imag\n    // if the trigger is displayed at 300 px wide)\n    const zoomFactor = options[\"zoomFactor\"] || 3;\n    // A DOM element to append the non-inline ZoomPane to.\n    // Required if `inlinePane !== true`.\n    const paneContainer = options[\"paneContainer\"] === undefined ? document.body : options[\"paneContainer\"];\n    // When to switch to an inline ZoomPane. This can be a boolean or\n    // an integer. If `true`, the ZoomPane will always be inline,\n    // if `false`, it will switch to inline when `windowWidth <= inlinePane`\n    const inlinePane = options[\"inlinePane\"] || 375;\n    // If `true`, touch events will trigger the zoom, like mouse events.\n    const handleTouch = \"handleTouch\" in options ? !!options[\"handleTouch\"] : true;\n    // If present (and a function), this will be called\n    // whenever the ZoomPane is shown.\n    const onShow = options[\"onShow\"] || null;\n    // If present (and a function), this will be called\n    // whenever the ZoomPane is hidden.\n    const onHide = options[\"onHide\"] || null;\n    // Add base styles to the page. See the \"Theming\"\n    // section of README.md for more information.\n    const injectBaseStyles = \"injectBaseStyles\" in options ? !!options[\"injectBaseStyles\"] : true;\n    // An optional number that determines how long to wait before\n    // showing the ZoomPane because of a `mouseenter` event.\n    const hoverDelay = options[\"hoverDelay\"] || 0;\n    // An optional number that determines how long to wait before\n    // showing the ZoomPane because of a `touchstart` event.\n    // It's unlikely that you would want to use this option, since\n    // \"tap and hold\" is much more intentional than a hover event.\n    const touchDelay = options[\"touchDelay\"] || 0;\n    // If true, a bounding box will show the area currently being previewed\n    // during mouse hover\n    const hoverBoundingBox = options[\"hoverBoundingBox\"] || false;\n    // If true, a bounding box will show the area currently being previewed\n    // during touch events\n    const touchBoundingBox = options[\"touchBoundingBox\"] || false;\n    // A DOM element to append the bounding box to.\n    const boundingBoxContainer = options[\"boundingBoxContainer\"] || document.body;\n\n    if (inlinePane !== true && !isDOMElement(paneContainer)) {\n      throw new TypeError(\"`paneContainer` must be a DOM element when `inlinePane !== true`\");\n    }\n    if (!isDOMElement(inlineContainer)) {\n      throw new TypeError(\"`inlineContainer` must be a DOM element\");\n    }\n\n    this.settings = {\n      namespace,\n      showWhitespaceAtEdges,\n      containInline,\n      inlineOffsetX,\n      inlineOffsetY,\n      inlineContainer,\n      sourceAttribute,\n      zoomFactor,\n      paneContainer,\n      inlinePane,\n      handleTouch,\n      onShow,\n      onHide,\n      injectBaseStyles,\n      hoverDelay,\n      touchDelay,\n      hoverBoundingBox,\n      touchBoundingBox,\n      boundingBoxContainer\n    };\n\n    if (this.settings.injectBaseStyles) {\n      injectBaseStylesheet();\n    }\n\n    this._buildZoomPane();\n    this._buildTrigger();\n  }\n\n  get isShowing() {\n    return this.zoomPane.isShowing;\n  }\n\n  get zoomFactor() {\n    return this.settings.zoomFactor;\n  }\n\n  set zoomFactor(zf) {\n    this.settings.zoomFactor = zf;\n    this.zoomPane.settings.zoomFactor = zf;\n    this.trigger.settings.zoomFactor = zf;\n    this.boundingBox.settings.zoomFactor = zf;\n  }\n\n  _buildZoomPane() {\n    this.zoomPane = new ZoomPane({\n      container: this.settings.paneContainer,\n      zoomFactor: this.settings.zoomFactor,\n      showWhitespaceAtEdges: this.settings.showWhitespaceAtEdges,\n      containInline: this.settings.containInline,\n      inline: this.settings.inlinePane,\n      namespace: this.settings.namespace,\n      inlineOffsetX: this.settings.inlineOffsetX,\n      inlineOffsetY: this.settings.inlineOffsetY,\n      inlineContainer: this.settings.inlineContainer\n    });\n  }\n\n  _buildTrigger() {\n    this.trigger = new Trigger({\n      el: this.triggerEl,\n      zoomPane: this.zoomPane,\n      handleTouch: this.settings.handleTouch,\n      onShow: this.settings.onShow,\n      onHide: this.settings.onHide,\n      sourceAttribute: this.settings.sourceAttribute,\n      hoverDelay: this.settings.hoverDelay,\n      touchDelay: this.settings.touchDelay,\n      hoverBoundingBox: this.settings.hoverBoundingBox,\n      touchBoundingBox: this.settings.touchBoundingBox,\n      namespace: this.settings.namespace,\n      zoomFactor: this.settings.zoomFactor,\n      boundingBoxContainer: this.settings.boundingBoxContainer\n    });\n  }\n\n  setZoomImageURL(imageURL) {\n    this.zoomPane._setImageURL(imageURL);\n  }\n\n  disable() {\n    this.trigger.enabled = false;\n  }\n\n  enable() {\n    this.trigger.enabled = true;\n  }\n\n  destroy() {\n    this.trigger._hide();\n    this.trigger._unbindEvents();\n  }\n}\n\n// Public API\n/* eslint-disable no-self-assign */\nObject.defineProperty(Drift.prototype, \"isShowing\", {\n  get: function() {\n    return this.isShowing;\n  }\n});\nObject.defineProperty(Drift.prototype, \"zoomFactor\", {\n  get: function() {\n    return this.zoomFactor;\n  },\n  set: function(value) {\n    this.zoomFactor = value;\n  }\n});\nDrift.prototype[\"setZoomImageURL\"] = Drift.prototype.setZoomImageURL;\nDrift.prototype[\"disable\"] = Drift.prototype.disable;\nDrift.prototype[\"enable\"] = Drift.prototype.enable;\nDrift.prototype[\"destroy\"] = Drift.prototype.destroy;\n/* eslint-enable no-self-assign */\n"],"file":"Drift.js"}